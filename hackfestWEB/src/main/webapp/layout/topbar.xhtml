<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pa="http://primefaces.org/barcelona">

	
    <div class="topbar">
        <div class="logo">
        	<p:graphicImage name="images/logoNomeBranco.png" library="barcelona-layout" />
        </div>
        
<!--         <p:graphicImage name="images/logo-text.svg" library="barcelona-layout" styleClass="app-name"/> -->
        
        <a id="topbar-menu-button" href="#">
            <i class="fa fa-bars"></i>
        </a>
        
        <ul class="topbar-menu fadeInDown animated">
            <li class="profile-item">
                <a href="#"> 
                 <h:form rendered="#{administradorBean.logged}">                          
                    <div class="profile-image">
                        <p:graphicImage name="/images/nophoto.png" library="barcelona-layout" />
                    </div>
                    <div class="profile-info">
                        <span class="topbar-item-name profile-name">
                        	<p:outputLabel value="#{administradorBean.usuario.nomeTopBar}" style="margin-bottom: 0;"/>
                        </span>
                       	 <p:outputLabel value="#{administradorBean.usuario.tipoUsuario.tipo}"/>
                    </div>
                  </h:form>   
                </a>
                <ul class="animated">
                  <h:form>
                    <li role="menuitem">
                       <a href="profile.jsf">
                            <i class="fa fa-fw fa-user"></i>
                            <span>Profile</span>
                        </a>    
                    </li>
						<li role="menuitem"><p:commandLink update=":formUsuarioDialog"
								onclick="PF('usuarioDialog').show();"> <i
								class="fa fa-key"></i> <span>Alterar Senha</span>
						</p:commandLink></li>
                    <li role="menuitem">
                     	
                       <h:commandLink action="#{usuarioBean.logout()}">
                            <i class="fa fa-fw fa-sign-out"></i>
                            <span>Logout</span>
                        </h:commandLink>
                    </li>
                   </h:form>    
                </ul>
              
            </li>
            <li >
            <h:panelGroup rendered="#{administradorBean.usuario.usuarioAdministrador}">
                <a href="banca.jsf">
                    <i class="topbar-icon fa fa-fw fa-cog"></i>
                    <span class="topbar-item-name">Settings</span>
                </a>
			</h:panelGroup>
	                
              
            </li>
            <li>
            </li>
            <li class="saldo-menu">
                <h:form id="formSaldo" rendered="#{administradorBean.logged}">
                     <div class="ui-g-4 ui-sm-2">
                     	<i class="topbar-icon fa fa fa-money saldo-icon"></i>
                     </div>
                     <div class="ui-g-8">
	                     <p:outputLabel class="saldo-label" value="Saldo" />
	                     <p:outputLabel id="saldo" class="saldo-value" value="#{administradorBean.usuario.conta.saldo}" >
	                     	<f:convertNumber maxFractionDigits="2" minFractionDigits="2" integerOnly="false" locale="pt-br"/>
	                     </p:outputLabel>
                     </div>
                </h:form>
            </li>
            <li class="search-item">
                <h:form rendered="#{administradorBean.logged}">
                <p:growl id="grownlBilheteGlobal" autoUpdate="false" for="inputPesquisaBilhete"   />
<!--                 	  -->
					
                    <span class="md-inputfield">
                       
                        <p:inputText required="true" value="#{bilheteBean.objeto.id}" id="inputPesquisaBilhete" requiredMessage="Digite o número do bilhete" >
                        <p:commandButton id="btnBilhet" icon="fa fa-search" ajax="false" oncomplete="PF('bilheteGlobalDialog').show()" 
                        update=":formBilheteGlobal" styleClass="lupaInterno" actionListener="#{bilheteBean.procurarBilhete()}"/> </p:inputText>
<!--                         <i class=""></i> -->
                        <label>Procurar Bilhete</label>
                    </span>
                    
                </h:form>
            </li>

        </ul>
    </div>
    
    
    			<p:dialog widgetVar="bilheteGlobalDialog" modal="true" closable="true" resizable="false" width="37%"  height="400px"
				  appendTo="@(body)" >
				  	<ui:include src="/pages/dialogBilhete.xhtml" />
		 		 </p:dialog>
		 		 
		 		 	<p:dialog header="Usuário" widgetVar="usuarioDialog" modal="true"
		resizable="false">
		<h:panelGroup id="grouppUsuario">
			<h:form acceptcharset="ISO-8859-1" id="formUsuarioDialog">
				
				<div class="ui-g ui-fluid">
					<div class="ui-g-12 ui-lg-12">
						<div class="formulariosConta">
						<p:messages autoUpdate="true" id="msg" />
						
						
							<p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<h:panelGroup>
									<p:outputLabel for="senhaAtual" value="Senha Atual"
										styleClass="inputAlinhado" />
									<p:password id="senhaAtual" required="true"
										styleClass="inputAlinhado"
										requiredMessage="A senha atual é obrigatória"
										value="#{usuarioBean.objeto.senhaAtual}" >
										<p:ajax update="msgSenha" event="change" listener="#{usuarioBean.verificarSenhaAtual()}" />	
									</p:password>
									<p:message for="senhaAtual" id="msgSenha"  />	
								</h:panelGroup>
								<h:panelGroup styleClass="md-inputfield"
									>
									<p:password id="senhaUsuario" required="true" label="Senha"
										value="#{usuarioBean.objeto.senha}" size="20"
										weakLabel="#{msg['usuario.force.password.weak']}"
										feedback="true"
										promptLabel="#{msg['usuario.password.pronpt.label']}"
										goodLabel="#{msg['usuario.force.password.good']}"
										strongLabel="#{msg['usuario.force.password.strong']}"
										match="confirmacaoUsuarioRegister"
										validatorMessage="#{msg['usuario.password.validator.confirmation']}" />
									<p:outputLabel value="#{msg['usuario.senha']}"
										for="senhaUsuario" />
								</h:panelGroup>

								<h:panelGroup styleClass="md-inputfield">
									
									<p:password id="confirmacaoUsuarioRegister" required="true"
										label="#{msg['usuario.password.confirmation']}" size="20"
										 />
									<p:outputLabel value="#{msg['usuario.password.confirmation']}"
										for="confirmacaoUsuarioRegister" />
								</h:panelGroup>
							</p:panelGrid>
							<div class="row col-xs-12 ">
								<div class="col-xs-4">
									<p:commandButton styleClass="green-btn" 
										actionListener="#{usuarioBean.atualizarSenha()}" value="Salvar" update="formUsuarioDialog" />
								</div>
								<div class="col-xs-4">
									<p:commandButton immediate="true"
										onclick="PF('usuarioDialog').hide();" value="Cancelar" />
								</div>
							</div>

						</div>
					</div>
				</div>



			</h:form>
		</h:panelGroup>
	</p:dialog>
    
    


</ui:composition>